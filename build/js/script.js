(function() {
  var $body, $win, ControllerBtns, FileUploader, Seek, Speed, Video, resizeEvents, setObserver;

  $win = $(window);

  $body = $('body');

  resizeEvents = {};

  setObserver = function($video, video) {
    $win.on({
      'resize': (function() {
        var distance, timer;
        timer = void 0;
        distance = 500;
        return function(e) {
          if (timer) {
            clearTimeout(timer);
          }
          timer = setTimeout(function() {
            var key;
            for (key in resizeEvents) {
              resizeEvents[key](e);
            }
          }, distance);
        };
      })()
    });
    return $video.on({
      'loadeddata': function(e) {
        var events, key;
        events = video.getEventsObj('loaded');
        for (key in events) {
          events[key](e);
        }
      },
      'ended': function(e) {
        var events, key;
        events = video.getEventsObj('ended');
        for (key in events) {
          events[key](e);
        }
      },
      'timeupdate': function(e) {
        var events, key;
        events = video.getEventsObj('timeupdate');
        for (key in events) {
          events[key](e);
        }
      },
      'play': function(e) {
        var events, key;
        events = video.getEventsObj('play');
        for (key in events) {
          events[key](e);
        }
      },
      'pause': function(e) {
        var events, key;
        events = video.getEventsObj('pause');
        for (key in events) {
          events[key](e);
        }
      }
    });
  };

  Video = (function() {
    var _after, _eventsObj, _hasVideo, _loop, _receivesObj, _speed, _styleFix, _videoInstance;

    _videoInstance = false;

    _hasVideo = false;

    _receivesObj = {};

    _loop = false;

    _speed = false;

    _eventsObj = {
      'loaded': {},
      'ended': {},
      'timeupdate': {},
      'play': {},
      'pause': {}
    };

    _receivesObj.urlSet = function(blob) {
      this.$video.attr('src', window.URL.createObjectURL(blob));
      _hasVideo = true;
    };

    _receivesObj.play = function(blob) {
      if (_hasVideo) {
        this.$video[0].play();
      }
    };

    _receivesObj.seekChanged = function(val) {
      this.$video[0].currentTime = val;
    };

    _receivesObj.speedChanged = function(val) {
      this.$video[0].playbackRate = val;
    };

    _receivesObj.pause = function(blob) {
      var $video;
      if (_hasVideo) {
        $video = this.$video;
        $video[0].pause();
      }
    };

    _receivesObj.loop = function(blob) {
      _loop = _loop === true ? false : true;
    };

    _after = function(e) {
      var _video;
      _video = this.$video[0];
      if (_loop) {
        _video.currentTime = 0;
        _video.play();
      } else {
        _video.currentTime = 0;
      }
    };

    _styleFix = function(e) {
      var _$video, _$videoWrap, _h, _wrap_h;
      _$video = this.$video;
      _$videoWrap = this.$videoWrap;
      _h = _$video.height();
      _wrap_h = _$videoWrap.height();
      _$video.css('height', 'auto');
      if (_wrap_h > _h) {
        _$video.css({
          'margin-top': ((_h + 100) / 2) * -1,
          'top': '50%'
        });
      } else {
        _$video.css({
          'height': _wrap_h,
          'margin-top': 0,
          'top': 0
        });
      }
    };

    function Video($video, resizeEvents, $videoWrap) {
      if (_videoInstance) {
        return _videoInstance;
      } else {
        _videoInstance = this;
      }
      this.$video = $video;
      this.$videoWrap = $videoWrap;
      _eventsObj.ended.after = (function(_this) {
        return function(e) {
          return _after.call(_this, e);
        };
      })(this);
      resizeEvents.videoStyleFix = (function(_this) {
        return function(e) {
          return _styleFix.call(_this, e);
        };
      })(this);
    }

    Video.prototype.getEventsObj = function(name) {
      if (name === 'all') {
        return _eventsObj;
      } else if (name && _eventsObj[name]) {
        return _eventsObj[name];
      } else {
        return false;
      }
    };

    Video.prototype.receiveEvent = function(name, arr) {
      if (name === 'upload') {
        _receivesObj.urlSet.call(this, arr[0]);
      }
      if (name === 'play') {
        _receivesObj.play.call(this);
      }
      if (name === 'pause') {
        _receivesObj.pause.call(this);
      }
      if (name === 'loop') {
        _receivesObj.loop.call(this);
      }
      if (name === 'seekChanged') {
        _receivesObj.seekChanged.call(this, arr[0]);
      }
      if (name === 'speedChanged') {
        _receivesObj.speedChanged.call(this, arr[0]);
      }
    };

    Video.prototype.get$obj = function() {
      return this.$video;
    };

    return Video;

  })();

  FileUploader = (function() {
    var _upload;

    _upload = function(e) {
      var file;
      file = e.target.files[0];
      if (!/^video/.test(file.type)) {
        alert("動画形式ではありません。");
        return false;
      }
      this.video.receiveEvent('upload', [
        new Blob([file], {
          type: file.type
        })
      ]);
    };

    function FileUploader(video, $input) {
      this.video = video;
      this.$input = $input;
      this.$input.on('change', (function(_this) {
        return function(e) {
          return _upload.call(_this, e);
        };
      })(this));
    }

    return FileUploader;

  })();

  Seek = (function() {
    var _changeSeekCount, _changeSeekbar, _duration, _hasVideo, _isDrag, _seekInit, _seekInput, _seekUp, _setSeekTimes, _time;

    _time = 0;

    _duration = 0;

    _hasVideo = false;

    _isDrag = false;

    _setSeekTimes = function() {
      var _video;
      _video = this.video.get$obj()[0];
      _time = _video.currentTime;
      _duration = _video.duration;
    };

    _changeSeekCount = function() {
      _setSeekTimes.call(this);
      this.$nowSeek.text(_time + ' / ' + _duration);
    };

    _changeSeekbar = function(e) {
      _setSeekTimes.call(this);
      if (!_isDrag) {
        this.$seek.val(Math.round((_time / _duration) * 10000) / 100);
      }
    };

    _seekInit = function(e) {
      var _video;
      _hasVideo = true;
      _video = $(e.target)[0];
      _time = _video.currentTime;
      _duration = _video.duration;
      this.$seek.val(_time);
      _changeSeekCount.call(this);
    };

    _seekUp = function(e) {
      var _val;
      _setSeekTimes.call(this);
      _val = (this.$seek.val() / 100) * _duration;
      this.video.receiveEvent('seekChanged', [_val]);
      _isDrag = false;
    };

    _seekInput = function(e) {
      if (!_hasVideo) {
        e.preventDefault();
        $(e.target).val(0);
      } else {
        _isDrag = true;
      }
    };

    function Seek(video, $seek, $nowSeek) {
      this.$seek = $seek;
      this.$nowSeek = $nowSeek;
      this.video = video;
      this.videoEvents = this.video.getEventsObj('all');
      this.$seek.on('input', (function(_this) {
        return function(e) {
          return _seekInput.call(_this, e);
        };
      })(this));
      this.$seek.on('change', (function(_this) {
        return function(e) {
          return _seekUp.call(_this, e);
        };
      })(this));
      this.$seek.on('', (function(_this) {
        return function(e) {
          return _seekUp.call(_this, e);
        };
      })(this));
      this.videoEvents.loaded['seekInit'] = (function(_this) {
        return function(e) {
          return _seekInit.call(_this, e);
        };
      })(this);
      this.videoEvents.timeupdate['changeSeekbar'] = (function(_this) {
        return function(e) {
          _changeSeekbar.call(_this, e);
          return _changeSeekCount.call(_this, e);
        };
      })(this);
      return;
    }

    return Seek;

  })();

  ControllerBtns = (function() {
    var _btnsReset, _changeBtn, _myLoop, _pause, _play;

    _changeBtn = function(type) {
      switch (type) {
        case 'play':
          this.btns.$play.addClass('active');
          this.btns.$pause.removeClass('active');
          break;
        case 'pause':
          this.btns.$pause.addClass('active');
          this.btns.$play.removeClass('active');
      }
    };

    _play = function(e) {
      e.preventDefault();
      this.video.receiveEvent('play');
    };

    _pause = function(e) {
      e.preventDefault();
      this.video.receiveEvent('pause');
    };

    _myLoop = function(e) {
      e.preventDefault();
      if (this.btns.$loop.hasClass('active')) {
        this.btns.$loop.removeClass('active');
      } else {
        this.btns.$loop.addClass('active');
      }
      this.video.receiveEvent('loop');
    };

    _btnsReset = function(e) {
      this.btns.$play.removeClass('active');
      this.btns.$pause.removeClass('active');
    };

    function ControllerBtns(video, btns) {
      this.video = video;
      this.btns = btns;
      this.videoEvents = this.video.getEventsObj('all');
      this.btns.$play.on('click', (function(_this) {
        return function(e) {
          return _play.call(_this, e);
        };
      })(this));
      this.btns.$pause.on('click', (function(_this) {
        return function(e) {
          return _pause.call(_this, e);
        };
      })(this));
      this.btns.$loop.on('click', (function(_this) {
        return function(e) {
          return _myLoop.call(_this, e);
        };
      })(this));
      this.videoEvents.play['changeBtn'] = (function(_this) {
        return function(e) {
          return _changeBtn.call(_this, 'play');
        };
      })(this);
      this.videoEvents.pause['changeBtn'] = (function(_this) {
        return function(e) {
          return _changeBtn.call(_this, 'pause');
        };
      })(this);
      this.videoEvents.loaded['btnsReset'] = (function(_this) {
        return function(e) {
          return _btnsReset.call(_this);
        };
      })(this);
    }

    return ControllerBtns;

  })();

  Speed = (function() {
    var _setSpeedMeter, _speedChange, _speedReset;

    _setSpeedMeter = function() {
      this.$meter.text(this.val);
    };

    _speedChange = function(e) {
      this.val = this.$input.val();
      _setSpeedMeter.call(this);
      this.video.receiveEvent('speedChanged', this.val);
    };

    _speedReset = function(e) {
      this.$input.val(this.defaultVal);
      this.val = this.$input.val();
      _setSpeedMeter.call(this);
      _speedChange.call(this);
    };

    function Speed(video, input, meter) {
      this.video = video;
      this.$input = $(input);
      this.$meter = $(meter);
      this.val = this.$input.val();
      this.defaultVal = this.val;
      this.videoEvents = this.video.getEventsObj('all');
      this.$input.on('change', (function(_this) {
        return function(e) {
          return _speedChange.call(_this, e);
        };
      })(this));
      this.videoEvents.loaded['speedReset'] = (function(_this) {
        return function(e) {
          return _speedReset.call(_this, e);
        };
      })(this);
    }

    return Speed;

  })();

  (function() {
    var controllerBtns, fileUploader, seek, speed, video;
    video = new Video($('#video'), resizeEvents, $('#video_wrap'));
    fileUploader = new FileUploader(video, $('#file'));
    seek = new Seek(video, $('#seek'), $('#now_seek'));
    speed = new Speed(video, '#speed', '#now_speed');
    controllerBtns = new ControllerBtns(video, {
      '$play': $('#controllers_btn .play a'),
      '$pause': $('#controllers_btn .pause a'),
      '$loop': $('#controllers_btn .loop a')
    });
    setObserver($('#video'), video);
    $win.trigger('resize');
  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QVosQ0FBaUIsS0FBakIsRUFBbUIsQ0FBbkI7UUFBTjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7SUFSdkI7Ozs7OztFQWViLENBQUEsU0FBQTtBQUNELFFBQUE7SUFBQSxLQUFBLEdBQXFCLElBQUEsS0FBQSxDQUFPLENBQUEsQ0FBRSxRQUFGLENBQVAsRUFBbUIsWUFBbkIsRUFBZ0MsQ0FBQSxDQUFFLGFBQUYsQ0FBaEM7SUFDckIsWUFBQSxHQUFxQixJQUFBLFlBQUEsQ0FBYyxLQUFkLEVBQW9CLENBQUEsQ0FBRSxPQUFGLENBQXBCO0lBQ3JCLElBQUEsR0FBcUIsSUFBQSxJQUFBLENBQU0sS0FBTixFQUFZLENBQUEsQ0FBRSxPQUFGLENBQVosRUFBdUIsQ0FBQSxDQUFFLFdBQUYsQ0FBdkI7SUFDckIsS0FBQSxHQUFxQixJQUFBLEtBQUEsQ0FBTyxLQUFQLEVBQWEsUUFBYixFQUFzQixZQUF0QjtJQUNyQixjQUFBLEdBQXFCLElBQUEsY0FBQSxDQUNwQixLQURvQixFQUVwQjtNQUNDLE9BQUEsRUFBVyxDQUFBLENBQUUsMEJBQUYsQ0FEWjtNQUVDLFFBQUEsRUFBVyxDQUFBLENBQUUsMkJBQUYsQ0FGWjtNQUdDLE9BQUEsRUFBVyxDQUFBLENBQUUsMEJBQUYsQ0FIWjtLQUZvQjtJQVFyQixXQUFBLENBQVksQ0FBQSxDQUFFLFFBQUYsQ0FBWixFQUF3QixLQUF4QjtJQUNBLElBQUksQ0FBQyxPQUFMLENBQWEsUUFBYjtFQWRDLENBQUEsQ0FBRixDQUFBO0FBM1dBIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiR3aW4gICAgICAgICA9ICQod2luZG93KVxuJGJvZHkgICAgICAgID0gJCgnYm9keScpXG5yZXNpemVFdmVudHMgPSB7fVxuXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyDjgqrjg5bjgrbjg7zjg5Djg7xcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbnNldE9ic2VydmVyID0gKCR2aWRlbyx2aWRlbyktPlxuXHQkd2luLm9uKHtcblx0XHQncmVzaXplJyA6ICgoKS0+XG5cdFx0XHR0aW1lciAgICA9IHVuZGVmaW5lZFxuXHRcdFx0ZGlzdGFuY2UgPSA1MDBcblx0XHRcdHJldHVybiAoZSktPlxuXHRcdFx0XHRpZiB0aW1lciB0aGVuIGNsZWFyVGltZW91dCh0aW1lcilcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KCgpLT5cblx0XHRcdFx0XHRmb3Iga2V5IG9mIHJlc2l6ZUV2ZW50cyB0aGVuIHJlc2l6ZUV2ZW50c1trZXldKGUpXG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdCxkaXN0YW5jZSlcblx0XHRcdFx0cmV0dXJuXG5cdFx0KSgpXG5cdH0pXG5cblx0JHZpZGVvLm9uKHtcblx0XHQnbG9hZGVkZGF0YScgOiAoZSktPlxuXHRcdFx0ZXZlbnRzID0gdmlkZW8uZ2V0RXZlbnRzT2JqKCdsb2FkZWQnKVxuXHRcdFx0Zm9yIGtleSBvZiBldmVudHMgdGhlbiBldmVudHNba2V5XShlKVxuXHRcdFx0cmV0dXJuXG5cdFx0J2VuZGVkJyAgICAgIDogKGUpLT5cblx0XHRcdGV2ZW50cyA9IHZpZGVvLmdldEV2ZW50c09iaignZW5kZWQnKVxuXHRcdFx0Zm9yIGtleSBvZiBldmVudHMgdGhlbiBldmVudHNba2V5XShlKVxuXHRcdFx0cmV0dXJuXG5cdFx0J3RpbWV1cGRhdGUnIDogKGUpLT5cblx0XHRcdGV2ZW50cyA9IHZpZGVvLmdldEV2ZW50c09iaigndGltZXVwZGF0ZScpXG5cdFx0XHRmb3Iga2V5IG9mIGV2ZW50cyB0aGVuIGV2ZW50c1trZXldKGUpXG5cdFx0XHRyZXR1cm5cblx0XHQncGxheScgICAgICAgOiAoZSktPlxuXHRcdFx0ZXZlbnRzID0gdmlkZW8uZ2V0RXZlbnRzT2JqKCdwbGF5Jylcblx0XHRcdGZvciBrZXkgb2YgZXZlbnRzIHRoZW4gZXZlbnRzW2tleV0oZSlcblx0XHRcdHJldHVyblxuXHRcdCdwYXVzZScgICAgICA6IChlKS0+XG5cdFx0XHRldmVudHMgPSB2aWRlby5nZXRFdmVudHNPYmooJ3BhdXNlJylcblx0XHRcdGZvciBrZXkgb2YgZXZlbnRzIHRoZW4gZXZlbnRzW2tleV0oZSlcblx0XHRcdHJldHVyblxuXHRcdH1cblx0KVxuXG5cbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIOODk+ODh+OCqlxuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIFZpZGVvXG5cdF92aWRlb0luc3RhbmNlID0gZmFsc2Vcblx0X2hhc1ZpZGVvICAgICAgPSBmYWxzZVxuXHRfcmVjZWl2ZXNPYmogICA9IHt9XG5cdF9sb29wICAgICAgICAgID0gZmFsc2Vcblx0X3NwZWVkICAgICAgICAgPSBmYWxzZVxuXHRfZXZlbnRzT2JqICAgICA9XG5cdFx0J2xvYWRlZCcgICAgIDoge31cblx0XHQnZW5kZWQnICAgICAgOiB7fVxuXHRcdCd0aW1ldXBkYXRlJyA6IHt9XG5cdFx0J3BsYXknICAgICAgIDoge31cblx0XHQncGF1c2UnICAgICAgOiB7fVxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44OT44OH44KqVVJM44Gu44K744OD44OIXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X3JlY2VpdmVzT2JqLnVybFNldCA9IChibG9iKS0+XG5cdFx0QCR2aWRlby5hdHRyKCdzcmMnLHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKVxuXHRcdF9oYXNWaWRlbyA9IHRydWVcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOODk+ODh+OCquOBruWGjeeUn1xuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9yZWNlaXZlc09iai5wbGF5ID0gKGJsb2IpLT5cblx0XHRpZiBfaGFzVmlkZW8gdGhlbiBAJHZpZGVvWzBdLnBsYXkoKVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44K344O844Kv5pON5L2c44Gr44KI44Gj44Gm5YaN55Sf5pmC5L2N572u44GM5aSJ5pu044GV44KM44GfXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X3JlY2VpdmVzT2JqLnNlZWtDaGFuZ2VkID0gKHZhbCktPlxuXHRcdEAkdmlkZW9bMF0uY3VycmVudFRpbWUgPSB2YWxcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOWGjeeUn+mAn+W6puOBjOWkieabtOOBleOCjOOBn1xuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9yZWNlaXZlc09iai5zcGVlZENoYW5nZWQgPSAodmFsKS0+XG5cdFx0QCR2aWRlb1swXS5wbGF5YmFja1JhdGUgPSB2YWxcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOODk+ODh+OCquOBruWBnOatolxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9yZWNlaXZlc09iai5wYXVzZSA9IChibG9iKS0+XG5cdFx0aWYgX2hhc1ZpZGVvXG5cdFx0XHQkdmlkZW8gPSBAJHZpZGVvXG5cdFx0XHQkdmlkZW9bMF0ucGF1c2UoKVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44OT44OH44Kq44Gu44Or44O844OX6Kit5a6aXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X3JlY2VpdmVzT2JqLmxvb3AgPSAoYmxvYiktPlxuXHRcdF9sb29wID0gaWYgX2xvb3AgPT0gdHJ1ZSB0aGVuIGZhbHNlIGVsc2UgdHJ1ZVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg5YaN55Sf57WC5LqG5b6M44Gu5Yem55CGXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X2FmdGVyID0gKGUpLT5cblx0XHRfdmlkZW8gPSBAJHZpZGVvWzBdXG5cdFx0aWYgX2xvb3Bcblx0XHRcdF92aWRlby5jdXJyZW50VGltZSA9IDBcblx0XHRcdF92aWRlby5wbGF5KClcblx0XHRlbHNlXG5cdFx0XHRfdmlkZW8uY3VycmVudFRpbWUgPSAwXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjg5Pjg4fjgqrjga7kvY3nva7oqr/mlbRcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRfc3R5bGVGaXggPSAoZSktPlxuXHRcdF8kdmlkZW8gICAgID0gQCR2aWRlb1xuXHRcdF8kdmlkZW9XcmFwID0gQCR2aWRlb1dyYXBcblx0XHRfaCAgICAgICAgICA9IF8kdmlkZW8uaGVpZ2h0KClcblx0XHRfd3JhcF9oICAgICA9IF8kdmlkZW9XcmFwLmhlaWdodCgpXG5cdFx0XyR2aWRlby5jc3MoJ2hlaWdodCcsJ2F1dG8nKVxuXHRcdGlmIF93cmFwX2ggPiBfaFxuXHRcdFx0XyR2aWRlby5jc3Moe1xuXHRcdFx0XHQnbWFyZ2luLXRvcCcgOiAoICggX2ggKyAxMDAgKSAvIDIgKSAqIC0xXG5cdFx0XHRcdCd0b3AnICAgICAgICA6ICc1MCUnXG5cdFx0XHR9KVxuXHRcdGVsc2Vcblx0XHRcdF8kdmlkZW8uY3NzKHtcblx0XHRcdFx0J2hlaWdodCcgICAgIDogX3dyYXBfaFxuXHRcdFx0XHQnbWFyZ2luLXRvcCcgOiAwXG5cdFx0XHRcdCd0b3AnICAgICAgICA6IDBcblx0XHRcdH0pXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjgrPjg7Pjgrnjg4jjg6njgq/jgr9cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRjb25zdHJ1Y3RvciA6ICgkdmlkZW8scmVzaXplRXZlbnRzLCR2aWRlb1dyYXApLT5cblx0XHRpZiBfdmlkZW9JbnN0YW5jZVxuXHRcdFx0cmV0dXJuIF92aWRlb0luc3RhbmNlXG5cdFx0ZWxzZVxuXHRcdFx0X3ZpZGVvSW5zdGFuY2UgPSBAXG5cdFx0QCR2aWRlbyAgICAgPSAkdmlkZW9cblx0XHRAJHZpZGVvV3JhcCA9ICR2aWRlb1dyYXBcblx0XHRfZXZlbnRzT2JqLmVuZGVkLmFmdGVyICAgICA9IChlKT0+IF9hZnRlci5jYWxsKEAsZSlcblx0XHRyZXNpemVFdmVudHMudmlkZW9TdHlsZUZpeCA9IChlKT0+IF9zdHlsZUZpeC5jYWxsKEAsZSlcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOOCpOODmeODs+ODiOODquOCueODiuODvOOBruWPluW+l1xuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGdldEV2ZW50c09iaiA6IChuYW1lKS0+XG5cdFx0aWYgbmFtZSA9PSAnYWxsJ1xuXHRcdFx0cmV0dXJuIF9ldmVudHNPYmpcblx0XHRlbHNlIGlmIG5hbWUgJiYgX2V2ZW50c09ialtuYW1lXVxuXHRcdFx0cmV0dXJuIF9ldmVudHNPYmpbbmFtZV1cblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gZmFsc2Vcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOOCpOODmeODs+ODiOOBruWPl+OBkeWPluOCilxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdHJlY2VpdmVFdmVudCA6IChuYW1lLGFyciktPlxuXHRcdGlmIG5hbWUgPT0gJ3VwbG9hZCcgICAgICAgdGhlbiBfcmVjZWl2ZXNPYmoudXJsU2V0LmNhbGwoQCxhcnJbMF0pXG5cdFx0aWYgbmFtZSA9PSAncGxheScgICAgICAgICB0aGVuIF9yZWNlaXZlc09iai5wbGF5LmNhbGwoQClcblx0XHRpZiBuYW1lID09ICdwYXVzZScgICAgICAgIHRoZW4gX3JlY2VpdmVzT2JqLnBhdXNlLmNhbGwoQClcblx0XHRpZiBuYW1lID09ICdsb29wJyAgICAgICAgIHRoZW4gX3JlY2VpdmVzT2JqLmxvb3AuY2FsbChAKVxuXHRcdGlmIG5hbWUgPT0gJ3NlZWtDaGFuZ2VkJyAgdGhlbiBfcmVjZWl2ZXNPYmouc2Vla0NoYW5nZWQuY2FsbChALGFyclswXSlcblx0XHRpZiBuYW1lID09ICdzcGVlZENoYW5nZWQnIHRoZW4gX3JlY2VpdmVzT2JqLnNwZWVkQ2hhbmdlZC5jYWxsKEAsYXJyWzBdKVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgJOOCquODluOCuOOCp+OCr+ODiOOCkui/lOOBmVxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGdldCRvYmogOiAoKS0+XG5cdFx0cmV0dXJuIEAkdmlkZW9cblxuXG5cbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIOOCouODg+ODl+ODreODvOODgOODvFxuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIEZpbGVVcGxvYWRlclxuXHRfdXBsb2FkID0gKGUpLT5cblx0XHRmaWxlID0gZS50YXJnZXQuZmlsZXNbMF1cblx0XHRpZiAhL152aWRlby8udGVzdChmaWxlLnR5cGUpXG5cdFx0XHRhbGVydCBcIuWLleeUu+W9ouW8j+OBp+OBr+OBguOCiuOBvuOBm+OCk+OAglwiXG5cdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRAdmlkZW8ucmVjZWl2ZUV2ZW50KFxuXHRcdFx0J3VwbG9hZCcsXG5cdFx0XHRbbmV3IEJsb2IoW2ZpbGVdLHt0eXBlOmZpbGUudHlwZX0pXVxuXHRcdClcblx0XHRyZXR1cm5cblxuXHRjb25zdHJ1Y3RvciA6ICh2aWRlbywkaW5wdXQpLT5cblx0XHRAdmlkZW8gID0gdmlkZW9cblx0XHRAJGlucHV0ID0gJGlucHV0XG5cblx0XHRAJGlucHV0Lm9uKCdjaGFuZ2UnLChlKT0+IF91cGxvYWQuY2FsbChALGUpKVxuXG5cbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIOOCs+ODs+ODiOODreODvOODqeODvCA6IOOCt+ODvOOCr1xuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY2xhc3MgU2Vla1xuXHRfdGltZSAgICAgPSAwICMg54++5Zyo44Gu5YaN55Sf5L2N572uXG5cdF9kdXJhdGlvbiA9IDAgIyDli5XnlLvjga7plbfjgZVcblx0X2hhc1ZpZGVvID0gZmFsc2Vcblx0X2lzRHJhZyAgID0gZmFsc2Vcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOe1jOmBjuaZgumWk+OBquOBqeOBruWPluW+l1xuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9zZXRTZWVrVGltZXMgPSAoKS0+XG5cdFx0X3ZpZGVvICAgID0gQHZpZGVvLmdldCRvYmooKVswXVxuXHRcdF90aW1lICAgICA9IF92aWRlby5jdXJyZW50VGltZVxuXHRcdF9kdXJhdGlvbiA9IF92aWRlby5kdXJhdGlvblxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg6KGo56S65pmC6ZaT44Gu5aSJ5pu0XG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X2NoYW5nZVNlZWtDb3VudCA9ICgpLT5cblx0XHRfc2V0U2Vla1RpbWVzLmNhbGwoQClcblx0XHRAJG5vd1NlZWsudGV4dChfdGltZSsnIC8gJytfZHVyYXRpb24pXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjgrfjg7zjgq/jg5Djg7zlpInmm7Rcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRfY2hhbmdlU2Vla2JhciA9IChlKS0+XG5cdFx0X3NldFNlZWtUaW1lcy5jYWxsKEApXG5cdFx0aWYgIV9pc0RyYWdcblx0XHRcdEAkc2Vlay52YWwoIE1hdGgucm91bmQoICggX3RpbWUgLyBfZHVyYXRpb24gKSAqIDEwMDAwICkgLyAxMDAgKVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44K344O844Kv5Yid5pyf5YyWXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X3NlZWtJbml0ID0gKGUpLT5cblx0XHRfaGFzVmlkZW8gPSB0cnVlXG5cdFx0X3ZpZGVvICAgID0gJChlLnRhcmdldClbMF1cblx0XHRfdGltZSAgICAgPSBfdmlkZW8uY3VycmVudFRpbWVcblx0XHRfZHVyYXRpb24gPSBfdmlkZW8uZHVyYXRpb25cblx0XHRAJHNlZWsudmFsKF90aW1lKVxuXHRcdF9jaGFuZ2VTZWVrQ291bnQuY2FsbChAKVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44K344O844Kv44OQ44O85pON5L2c5b6MXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X3NlZWtVcCA9IChlKS0+XG5cdFx0X3NldFNlZWtUaW1lcy5jYWxsKEApXG5cdFx0X3ZhbCA9ICggQCRzZWVrLnZhbCgpIC8gMTAwICkgKiBfZHVyYXRpb25cblx0XHRAdmlkZW8ucmVjZWl2ZUV2ZW50KCAnc2Vla0NoYW5nZWQnLFtfdmFsXSApXG5cdFx0X2lzRHJhZyA9IGZhbHNlXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjgrfjg7zjgq/jg5Djg7zmk43kvZzkuK1cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRfc2Vla0lucHV0ID0gKGUpLT5cblx0XHRpZiAhX2hhc1ZpZGVvXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KClcblx0XHRcdCQoZS50YXJnZXQpLnZhbCgwKVxuXHRcdGVsc2Vcblx0XHRcdF9pc0RyYWcgPSB0cnVlXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0I1xuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGNvbnN0cnVjdG9yIDogKHZpZGVvLCRzZWVrLCRub3dTZWVrKS0+XG5cdFx0QCRzZWVrICAgICAgID0gJHNlZWtcblx0XHRAJG5vd1NlZWsgICAgPSAkbm93U2Vla1xuXHRcdEB2aWRlbyAgICAgICA9IHZpZGVvXG5cdFx0QHZpZGVvRXZlbnRzID0gQHZpZGVvLmdldEV2ZW50c09iaignYWxsJylcblx0XHRAJHNlZWsub24oJ2lucHV0JywoZSk9PiBfc2Vla0lucHV0LmNhbGwoQCxlKSApXG5cdFx0QCRzZWVrLm9uKCdjaGFuZ2UnLChlKT0+IF9zZWVrVXAuY2FsbChALGUpIClcblx0XHRAJHNlZWsub24oJycsKGUpPT4gX3NlZWtVcC5jYWxsKEAsZSkgKVxuXHRcdEB2aWRlb0V2ZW50cy5sb2FkZWRbJ3NlZWtJbml0J10gICAgICAgICAgPSAoZSk9PiBfc2Vla0luaXQuY2FsbChALGUpXG5cdFx0QHZpZGVvRXZlbnRzLnRpbWV1cGRhdGVbJ2NoYW5nZVNlZWtiYXInXSA9IChlKT0+XG5cdFx0XHRfY2hhbmdlU2Vla2Jhci5jYWxsKEAsZSlcblx0XHRcdF9jaGFuZ2VTZWVrQ291bnQuY2FsbChALGUpXG5cdFx0cmV0dXJuXG5cbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jIOOCs+ODs+ODiOODreODvOODqeODvCA6IOODnOOCv+ODs1xuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIENvbnRyb2xsZXJCdG5zXG5cblx0X2NoYW5nZUJ0biA9ICh0eXBlKS0+XG5cdFx0c3dpdGNoIHR5cGVcblx0XHRcdHdoZW4gJ3BsYXknXG5cdFx0XHRcdEBidG5zLiRwbGF5LmFkZENsYXNzKCdhY3RpdmUnKVxuXHRcdFx0XHRAYnRucy4kcGF1c2UucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG5cdFx0XHR3aGVuICdwYXVzZSdcblx0XHRcdFx0QGJ0bnMuJHBhdXNlLmFkZENsYXNzKCdhY3RpdmUnKVxuXHRcdFx0XHRAYnRucy4kcGxheS5yZW1vdmVDbGFzcygnYWN0aXZlJylcblx0XHRyZXR1cm5cblxuXHRfcGxheSA9IChlKS0+XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0QHZpZGVvLnJlY2VpdmVFdmVudCgncGxheScpXG5cdFx0cmV0dXJuXG5cblx0X3BhdXNlID0gKGUpLT5cblx0XHRlLnByZXZlbnREZWZhdWx0KClcblx0XHRAdmlkZW8ucmVjZWl2ZUV2ZW50KCdwYXVzZScpXG5cdFx0cmV0dXJuXG5cblx0X215TG9vcCA9IChlKS0+XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0aWYgQGJ0bnMuJGxvb3AuaGFzQ2xhc3MoJ2FjdGl2ZScpXG5cdFx0XHRAYnRucy4kbG9vcC5yZW1vdmVDbGFzcygnYWN0aXZlJylcblx0XHRlbHNlXG5cdFx0XHRAYnRucy4kbG9vcC5hZGRDbGFzcygnYWN0aXZlJylcblx0XHRAdmlkZW8ucmVjZWl2ZUV2ZW50KCdsb29wJylcblx0XHRyZXR1cm5cblxuXHRfYnRuc1Jlc2V0ID0gKGUpLT5cblx0XHRAYnRucy4kcGxheS5yZW1vdmVDbGFzcygnYWN0aXZlJylcblx0XHRAYnRucy4kcGF1c2UucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG5cdFx0cmV0dXJuXG5cblx0Y29uc3RydWN0b3IgOiAodmlkZW8sYnRucyktPlxuXHRcdEB2aWRlbyAgICAgICA9IHZpZGVvXG5cdFx0QGJ0bnMgICAgICAgID0gYnRuc1xuXHRcdEB2aWRlb0V2ZW50cyA9IEB2aWRlby5nZXRFdmVudHNPYmooJ2FsbCcpXG5cdFx0QGJ0bnMuJHBsYXkub24oJ2NsaWNrJywoZSk9PiBfcGxheS5jYWxsKEAsZSkpXG5cdFx0QGJ0bnMuJHBhdXNlLm9uKCdjbGljaycsKGUpPT4gX3BhdXNlLmNhbGwoQCxlKSlcblx0XHRAYnRucy4kbG9vcC5vbignY2xpY2snLChlKT0+IF9teUxvb3AuY2FsbChALGUpKVxuXHRcdEB2aWRlb0V2ZW50cy5wbGF5WydjaGFuZ2VCdG4nXSAgID0gKGUpPT4gX2NoYW5nZUJ0bi5jYWxsKEAsJ3BsYXknKVxuXHRcdEB2aWRlb0V2ZW50cy5wYXVzZVsnY2hhbmdlQnRuJ10gID0gKGUpPT4gX2NoYW5nZUJ0bi5jYWxsKEAsJ3BhdXNlJylcblx0XHRAdmlkZW9FdmVudHMubG9hZGVkWydidG5zUmVzZXQnXSA9IChlKT0+IF9idG5zUmVzZXQuY2FsbChAKVxuXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyDjgrPjg7Pjg4jjg63jg7zjg6njg7wgOiDjgrnjg5Tjg7zjg4lcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBTcGVlZFxuXG5cdF9zZXRTcGVlZE1ldGVyID0gKCktPlxuXHRcdEAkbWV0ZXIudGV4dChAdmFsKVxuXHRcdHJldHVyblxuXG5cdF9zcGVlZENoYW5nZSA9IChlKS0+XG5cdFx0QHZhbCA9IEAkaW5wdXQudmFsKClcblx0XHRfc2V0U3BlZWRNZXRlci5jYWxsKEApXG5cdFx0QHZpZGVvLnJlY2VpdmVFdmVudCgnc3BlZWRDaGFuZ2VkJyxAdmFsKVxuXHRcdHJldHVyblxuXG5cdF9zcGVlZFJlc2V0ID0gKGUpLT5cblx0XHRAJGlucHV0LnZhbChAZGVmYXVsdFZhbClcblx0XHRAdmFsID0gQCRpbnB1dC52YWwoKVxuXHRcdF9zZXRTcGVlZE1ldGVyLmNhbGwoQClcblx0XHRfc3BlZWRDaGFuZ2UuY2FsbChAKVxuXHRcdHJldHVyblxuXG5cdGNvbnN0cnVjdG9yIDogKHZpZGVvLGlucHV0LG1ldGVyKS0+XG5cdFx0QHZpZGVvICAgICAgID0gdmlkZW9cblx0XHRAJGlucHV0ICAgICAgPSAkKGlucHV0KVxuXHRcdEAkbWV0ZXIgICAgICA9ICQobWV0ZXIpXG5cdFx0QHZhbCAgICAgICAgID0gQCRpbnB1dC52YWwoKVxuXHRcdEBkZWZhdWx0VmFsICA9IEB2YWxcblx0XHRAdmlkZW9FdmVudHMgPSBAdmlkZW8uZ2V0RXZlbnRzT2JqKCdhbGwnKVxuXHRcdEAkaW5wdXQub24oJ2NoYW5nZScsKGUpPT4gX3NwZWVkQ2hhbmdlLmNhbGwoQCxlKSApXG5cdFx0QHZpZGVvRXZlbnRzLmxvYWRlZFsnc3BlZWRSZXNldCddID0gKGUpPT4gX3NwZWVkUmVzZXQuY2FsbChALGUpXG5cblxuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiNcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRvLT5cblx0dmlkZW8gICAgICAgICAgPSBuZXcgVmlkZW8oICQoJyN2aWRlbycpLHJlc2l6ZUV2ZW50cywkKCcjdmlkZW9fd3JhcCcpIClcblx0ZmlsZVVwbG9hZGVyICAgPSBuZXcgRmlsZVVwbG9hZGVyKCB2aWRlbywkKCcjZmlsZScpIClcblx0c2VlayAgICAgICAgICAgPSBuZXcgU2VlayggdmlkZW8sJCgnI3NlZWsnKSwkKCcjbm93X3NlZWsnKSApXG5cdHNwZWVkICAgICAgICAgID0gbmV3IFNwZWVkKCB2aWRlbywnI3NwZWVkJywnI25vd19zcGVlZCcgKVxuXHRjb250cm9sbGVyQnRucyA9IG5ldyBDb250cm9sbGVyQnRucyhcblx0XHR2aWRlb1xuXHRcdHtcblx0XHRcdCckcGxheScgIDogJCgnI2NvbnRyb2xsZXJzX2J0biAucGxheSBhJylcblx0XHRcdCckcGF1c2UnIDogJCgnI2NvbnRyb2xsZXJzX2J0biAucGF1c2UgYScpXG5cdFx0XHQnJGxvb3AnICA6ICQoJyNjb250cm9sbGVyc19idG4gLmxvb3AgYScpXG5cdFx0fVxuXHQpXG5cdHNldE9ic2VydmVyKCQoJyN2aWRlbycpLHZpZGVvKVxuXHQkd2luLnRyaWdnZXIoJ3Jlc2l6ZScpXG5cdHJldHVybiJdfQ==