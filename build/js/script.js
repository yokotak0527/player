(function() {
  var $body, $win, ControllerBtns, FileUploader, Seek, Speed, Video, resizeEvents, setObserver;

  $win = $(window);

  $body = $('body');

  resizeEvents = {};

  setObserver = function($video, video) {
    $win.on({
      'resize': (function() {
        var distance, timer;
        timer = void 0;
        distance = 500;
        return function(e) {
          if (timer) {
            clearTimeout(timer);
          }
          timer = setTimeout(function() {
            var key;
            for (key in resizeEvents) {
              resizeEvents[key](e);
            }
          }, distance);
        };
      })()
    });
    return $video.on({
      'loadeddata': function(e) {
        var events, key;
        events = video.getEventsObj('loaded');
        for (key in events) {
          events[key](e);
        }
      },
      'ended': function(e) {
        var events, key;
        events = video.getEventsObj('ended');
        for (key in events) {
          events[key](e);
        }
      },
      'timeupdate': function(e) {
        var events, key;
        events = video.getEventsObj('timeupdate');
        for (key in events) {
          events[key](e);
        }
      },
      'play': function(e) {
        var events, key;
        events = video.getEventsObj('play');
        for (key in events) {
          events[key](e);
        }
      },
      'pause': function(e) {
        var events, key;
        events = video.getEventsObj('pause');
        for (key in events) {
          events[key](e);
        }
      }
    });
  };

  Video = (function() {
    var _after, _eventsObj, _hasVideo, _loop, _receivesObj, _speed, _styleFix, _videoInstance;

    _videoInstance = false;

    _hasVideo = false;

    _receivesObj = {};

    _loop = false;

    _speed = false;

    _eventsObj = {
      'loaded': {},
      'ended': {},
      'timeupdate': {},
      'play': {},
      'pause': {}
    };

    _receivesObj.urlSet = function(blob) {
      this.$video.attr('src', window.URL.createObjectURL(blob));
      _hasVideo = true;
    };

    _receivesObj.play = function(blob) {
      if (_hasVideo) {
        this.$video[0].play();
      }
    };

    _receivesObj.seekChanged = function(val) {
      this.$video[0].currentTime = val;
    };

    _receivesObj.speedChanged = function(val) {
      this.$video[0].playbackRate = val;
    };

    _receivesObj.pause = function(blob) {
      var $video;
      if (_hasVideo) {
        $video = this.$video;
        $video[0].pause();
      }
    };

    _receivesObj.loop = function(blob) {
      _loop = _loop === true ? false : true;
    };

    _after = function(e) {
      var _video;
      _video = this.$video[0];
      if (_loop) {
        _video.currentTime = 0;
        _video.play();
      } else {
        _video.currentTime = 0;
      }
    };

    _styleFix = function(e) {
      var _$video, _$videoWrap, _h, _wrap_h;
      _$video = this.$video;
      _$videoWrap = this.$videoWrap;
      _h = _$video.height();
      _wrap_h = _$videoWrap.height();
      _$video.css('height', 'auto');
      if (_wrap_h > _h) {
        _$video.css({
          'margin-top': ((_h + 100) / 2) * -1,
          'top': '50%'
        });
      } else {
        _$video.css({
          'height': _wrap_h,
          'margin-top': 0,
          'top': 0
        });
      }
    };

    function Video($video, resizeEvents, $videoWrap) {
      if (_videoInstance) {
        return _videoInstance;
      } else {
        _videoInstance = this;
      }
      this.$video = $video;
      this.$videoWrap = $videoWrap;
      _eventsObj.ended.after = (function(_this) {
        return function(e) {
          return _after.call(_this, e);
        };
      })(this);
      resizeEvents.videoStyleFix = (function(_this) {
        return function(e) {
          return _styleFix.call(_this, e);
        };
      })(this);
    }

    Video.prototype.getEventsObj = function(name) {
      if (name === 'all') {
        return _eventsObj;
      } else if (name && _eventsObj[name]) {
        return _eventsObj[name];
      } else {
        return false;
      }
    };

    Video.prototype.receiveEvent = function(name, arr) {
      if (name === 'upload') {
        _receivesObj.urlSet.call(this, arr[0]);
      }
      if (name === 'play') {
        _receivesObj.play.call(this);
      }
      if (name === 'pause') {
        _receivesObj.pause.call(this);
      }
      if (name === 'loop') {
        _receivesObj.loop.call(this);
      }
      if (name === 'seekChanged') {
        _receivesObj.seekChanged.call(this, arr[0]);
      }
      if (name === 'speedChanged') {
        _receivesObj.speedChanged.call(this, arr[0]);
      }
    };

    Video.prototype.get$obj = function() {
      return this.$video;
    };

    return Video;

  })();

  FileUploader = (function() {
    var _upload;

    _upload = function(e) {
      var file;
      file = e.target.files[0];
      if (!/^video/.test(file.type)) {
        alert("動画形式ではありません。");
        return false;
      }
      this.video.receiveEvent('upload', [
        new Blob([file], {
          type: file.type
        })
      ]);
    };

    function FileUploader(video, $input) {
      this.video = video;
      this.$input = $input;
      this.$input.on('change', (function(_this) {
        return function(e) {
          return _upload.call(_this, e);
        };
      })(this));
    }

    return FileUploader;

  })();

  Seek = (function() {
    var _changeSeekCount, _changeSeekbar, _duration, _hasVideo, _isDrag, _seekInit, _seekInput, _seekUp, _setSeekTimes, _time;

    _time = 0;

    _duration = 0;

    _hasVideo = false;

    _isDrag = false;

    _setSeekTimes = function() {
      var _video;
      _video = this.video.get$obj()[0];
      _time = _video.currentTime;
      _duration = _video.duration;
    };

    _changeSeekCount = function() {
      _setSeekTimes.call(this);
      this.$nowSeek.text(_time + ' / ' + _duration);
    };

    _changeSeekbar = function(e) {
      _setSeekTimes.call(this);
      if (!_isDrag) {
        this.$seek.val(Math.round((_time / _duration) * 10000) / 100);
      }
    };

    _seekInit = function(e) {
      var _video;
      _hasVideo = true;
      _video = $(e.target)[0];
      _time = _video.currentTime;
      _duration = _video.duration;
      this.$seek.val(_time);
      _changeSeekCount.call(this);
    };

    _seekUp = function(e) {
      var _val;
      _setSeekTimes.call(this);
      _val = (this.$seek.val() / 100) * _duration;
      this.video.receiveEvent('seekChanged', [_val]);
      _isDrag = false;
    };

    _seekInput = function(e) {
      if (!_hasVideo) {
        e.preventDefault();
        $(e.target).val(0);
      } else {
        _isDrag = true;
      }
    };

    function Seek(video, $seek, $nowSeek) {
      this.$seek = $seek;
      this.$nowSeek = $nowSeek;
      this.video = video;
      this.videoEvents = this.video.getEventsObj('all');
      this.$seek.on('input', (function(_this) {
        return function(e) {
          return _seekInput.call(_this, e);
        };
      })(this));
      this.$seek.on('change', (function(_this) {
        return function(e) {
          return _seekUp.call(_this, e);
        };
      })(this));
      this.$seek.on('', (function(_this) {
        return function(e) {
          return _seekUp.call(_this, e);
        };
      })(this));
      this.videoEvents.loaded['seekInit'] = (function(_this) {
        return function(e) {
          return _seekInit.call(_this, e);
        };
      })(this);
      this.videoEvents.timeupdate['changeSeekbar'] = (function(_this) {
        return function(e) {
          _changeSeekbar.call(_this, e);
          return _changeSeekCount.call(_this, e);
        };
      })(this);
      return;
    }

    return Seek;

  })();

  ControllerBtns = (function() {
    var _btnsReset, _changeBtn, _myLoop, _pause, _play;

    _changeBtn = function(type) {
      switch (type) {
        case 'play':
          this.btns.$play.addClass('active');
          this.btns.$pause.removeClass('active');
          break;
        case 'pause':
          this.btns.$pause.addClass('active');
          this.btns.$play.removeClass('active');
      }
    };

    _play = function(e) {
      e.preventDefault();
      this.video.receiveEvent('play');
    };

    _pause = function(e) {
      e.preventDefault();
      this.video.receiveEvent('pause');
    };

    _myLoop = function(e) {
      e.preventDefault();
      if (this.btns.$loop.hasClass('active')) {
        this.btns.$loop.removeClass('active');
      } else {
        this.btns.$loop.addClass('active');
      }
      this.video.receiveEvent('loop');
    };

    _btnsReset = function(e) {
      this.btns.$play.removeClass('active');
      this.btns.$pause.removeClass('active');
    };

    function ControllerBtns(video, btns) {
      this.video = video;
      this.btns = btns;
      this.videoEvents = this.video.getEventsObj('all');
      this.btns.$play.on('click', (function(_this) {
        return function(e) {
          return _play.call(_this, e);
        };
      })(this));
      this.btns.$pause.on('click', (function(_this) {
        return function(e) {
          return _pause.call(_this, e);
        };
      })(this));
      this.btns.$loop.on('click', (function(_this) {
        return function(e) {
          return _myLoop.call(_this, e);
        };
      })(this));
      this.videoEvents.play['changeBtn'] = (function(_this) {
        return function(e) {
          return _changeBtn.call(_this, 'play');
        };
      })(this);
      this.videoEvents.pause['changeBtn'] = (function(_this) {
        return function(e) {
          return _changeBtn.call(_this, 'pause');
        };
      })(this);
      this.videoEvents.loaded['btnsReset'] = (function(_this) {
        return function(e) {
          return _btnsReset.call(_this);
        };
      })(this);
    }

    return ControllerBtns;

  })();

  Speed = (function() {
    var _setSpeedMeter, _speedChange, _speedReset;

    _setSpeedMeter = function() {
      this.$meter.text(this.val);
    };

    _speedChange = function(e) {
      this.val = this.$input.val();
      _setSpeedMeter.call(this);
      this.video.receiveEvent('speedChanged', [this.val]);
    };

    _speedReset = function(e) {
      this.$input.val(this.defaultVal);
      this.val = this.$input.val();
      _setSpeedMeter.call(this);
      _speedChange.call(this);
    };

    function Speed(video, input, meter) {
      this.video = video;
      this.$input = $(input);
      this.$meter = $(meter);
      this.val = this.$input.val();
      this.defaultVal = this.val;
      this.videoEvents = this.video.getEventsObj('all');
      this.$input.on('change', (function(_this) {
        return function(e) {
          return _speedChange.call(_this, e);
        };
      })(this));
      this.videoEvents.loaded['speedReset'] = (function(_this) {
        return function(e) {
          return _speedReset.call(_this, e);
        };
      })(this);
    }

    return Speed;

  })();

  (function() {
    var controllerBtns, fileUploader, seek, speed, video;
    video = new Video($('#video'), resizeEvents, $('#video_wrap'));
    fileUploader = new FileUploader(video, $('#file'));
    seek = new Seek(video, $('#seek'), $('#now_seek'));
    speed = new Speed(video, '#speed', '#now_speed');
    controllerBtns = new ControllerBtns(video, {
      '$play': $('#controllers_btn .play a'),
      '$pause': $('#controllers_btn .pause a'),
      '$loop': $('#controllers_btn .loop a')
    });
    setObserver($('#video'), video);
    $win.trigger('resize');
  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QVcsQ0FBQyxJQUFaLENBQWlCLEtBQWpCLEVBQW1CLENBQW5CO1FBQU47TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0lBUnZCOzs7Ozs7RUFlYixDQUFBLFNBQUE7QUFDRCxRQUFBO0lBQUEsS0FBQSxHQUFxQixJQUFBLEtBQUEsQ0FBTyxDQUFBLENBQUUsUUFBRixDQUFQLEVBQW1CLFlBQW5CLEVBQWdDLENBQUEsQ0FBRSxhQUFGLENBQWhDO0lBQ3JCLFlBQUEsR0FBcUIsSUFBQSxZQUFBLENBQWMsS0FBZCxFQUFvQixDQUFBLENBQUUsT0FBRixDQUFwQjtJQUNyQixJQUFBLEdBQXFCLElBQUEsSUFBQSxDQUFNLEtBQU4sRUFBWSxDQUFBLENBQUUsT0FBRixDQUFaLEVBQXVCLENBQUEsQ0FBRSxXQUFGLENBQXZCO0lBQ3JCLEtBQUEsR0FBcUIsSUFBQSxLQUFBLENBQU8sS0FBUCxFQUFhLFFBQWIsRUFBc0IsWUFBdEI7SUFDckIsY0FBQSxHQUFxQixJQUFBLGNBQUEsQ0FDcEIsS0FEb0IsRUFFcEI7TUFDQyxPQUFBLEVBQVcsQ0FBQSxDQUFFLDBCQUFGLENBRFo7TUFFQyxRQUFBLEVBQVcsQ0FBQSxDQUFFLDJCQUFGLENBRlo7TUFHQyxPQUFBLEVBQVcsQ0FBQSxDQUFFLDBCQUFGLENBSFo7S0FGb0I7SUFRckIsV0FBQSxDQUFZLENBQUEsQ0FBRSxRQUFGLENBQVosRUFBd0IsS0FBeEI7SUFDQSxJQUFJLENBQUMsT0FBTCxDQUFhLFFBQWI7RUFkQyxDQUFBLENBQUYsQ0FBQTtBQTNXQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIkd2luICAgICAgICAgPSAkKHdpbmRvdylcbiRib2R5ICAgICAgICA9ICQoJ2JvZHknKVxucmVzaXplRXZlbnRzID0ge31cblxuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiMg44Kq44OW44K244O844OQ44O8XG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5zZXRPYnNlcnZlciA9ICgkdmlkZW8sdmlkZW8pLT5cblx0JHdpbi5vbih7XG5cdFx0J3Jlc2l6ZScgOiAoKCktPlxuXHRcdFx0dGltZXIgICAgPSB1bmRlZmluZWRcblx0XHRcdGRpc3RhbmNlID0gNTAwXG5cdFx0XHRyZXR1cm4gKGUpLT5cblx0XHRcdFx0aWYgdGltZXIgdGhlbiBjbGVhclRpbWVvdXQodGltZXIpXG5cdFx0XHRcdHRpbWVyID0gc2V0VGltZW91dCgoKS0+XG5cdFx0XHRcdFx0Zm9yIGtleSBvZiByZXNpemVFdmVudHMgdGhlbiByZXNpemVFdmVudHNba2V5XShlKVxuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHQsZGlzdGFuY2UpXG5cdFx0XHRcdHJldHVyblxuXHRcdCkoKVxuXHR9KVxuXG5cdCR2aWRlby5vbih7XG5cdFx0J2xvYWRlZGRhdGEnIDogKGUpLT5cblx0XHRcdGV2ZW50cyA9IHZpZGVvLmdldEV2ZW50c09iaignbG9hZGVkJylcblx0XHRcdGZvciBrZXkgb2YgZXZlbnRzIHRoZW4gZXZlbnRzW2tleV0oZSlcblx0XHRcdHJldHVyblxuXHRcdCdlbmRlZCcgICAgICA6IChlKS0+XG5cdFx0XHRldmVudHMgPSB2aWRlby5nZXRFdmVudHNPYmooJ2VuZGVkJylcblx0XHRcdGZvciBrZXkgb2YgZXZlbnRzIHRoZW4gZXZlbnRzW2tleV0oZSlcblx0XHRcdHJldHVyblxuXHRcdCd0aW1ldXBkYXRlJyA6IChlKS0+XG5cdFx0XHRldmVudHMgPSB2aWRlby5nZXRFdmVudHNPYmooJ3RpbWV1cGRhdGUnKVxuXHRcdFx0Zm9yIGtleSBvZiBldmVudHMgdGhlbiBldmVudHNba2V5XShlKVxuXHRcdFx0cmV0dXJuXG5cdFx0J3BsYXknICAgICAgIDogKGUpLT5cblx0XHRcdGV2ZW50cyA9IHZpZGVvLmdldEV2ZW50c09iaigncGxheScpXG5cdFx0XHRmb3Iga2V5IG9mIGV2ZW50cyB0aGVuIGV2ZW50c1trZXldKGUpXG5cdFx0XHRyZXR1cm5cblx0XHQncGF1c2UnICAgICAgOiAoZSktPlxuXHRcdFx0ZXZlbnRzID0gdmlkZW8uZ2V0RXZlbnRzT2JqKCdwYXVzZScpXG5cdFx0XHRmb3Iga2V5IG9mIGV2ZW50cyB0aGVuIGV2ZW50c1trZXldKGUpXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdClcblxuXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyDjg5Pjg4fjgqpcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBWaWRlb1xuXHRfdmlkZW9JbnN0YW5jZSA9IGZhbHNlXG5cdF9oYXNWaWRlbyAgICAgID0gZmFsc2Vcblx0X3JlY2VpdmVzT2JqICAgPSB7fVxuXHRfbG9vcCAgICAgICAgICA9IGZhbHNlXG5cdF9zcGVlZCAgICAgICAgID0gZmFsc2Vcblx0X2V2ZW50c09iaiAgICAgPVxuXHRcdCdsb2FkZWQnICAgICA6IHt9XG5cdFx0J2VuZGVkJyAgICAgIDoge31cblx0XHQndGltZXVwZGF0ZScgOiB7fVxuXHRcdCdwbGF5JyAgICAgICA6IHt9XG5cdFx0J3BhdXNlJyAgICAgIDoge31cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOODk+ODh+OCqlVSTOOBruOCu+ODg+ODiFxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9yZWNlaXZlc09iai51cmxTZXQgPSAoYmxvYiktPlxuXHRcdEAkdmlkZW8uYXR0cignc3JjJyx3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSlcblx0XHRfaGFzVmlkZW8gPSB0cnVlXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjg5Pjg4fjgqrjga7lho3nlJ9cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRfcmVjZWl2ZXNPYmoucGxheSA9IChibG9iKS0+XG5cdFx0aWYgX2hhc1ZpZGVvIHRoZW4gQCR2aWRlb1swXS5wbGF5KClcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOOCt+ODvOOCr+aTjeS9nOOBq+OCiOOBo+OBpuWGjeeUn+aZguS9jee9ruOBjOWkieabtOOBleOCjOOBn1xuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9yZWNlaXZlc09iai5zZWVrQ2hhbmdlZCA9ICh2YWwpLT5cblx0XHRAJHZpZGVvWzBdLmN1cnJlbnRUaW1lID0gdmFsXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDlho3nlJ/pgJ/luqbjgYzlpInmm7TjgZXjgozjgZ9cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRfcmVjZWl2ZXNPYmouc3BlZWRDaGFuZ2VkID0gKHZhbCktPlxuXHRcdEAkdmlkZW9bMF0ucGxheWJhY2tSYXRlID0gdmFsXG5cdFx0cmV0dXJuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjg5Pjg4fjgqrjga7lgZzmraJcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRfcmVjZWl2ZXNPYmoucGF1c2UgPSAoYmxvYiktPlxuXHRcdGlmIF9oYXNWaWRlb1xuXHRcdFx0JHZpZGVvID0gQCR2aWRlb1xuXHRcdFx0JHZpZGVvWzBdLnBhdXNlKClcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOODk+ODh+OCquOBruODq+ODvOODl+ioreWumlxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9yZWNlaXZlc09iai5sb29wID0gKGJsb2IpLT5cblx0XHRfbG9vcCA9IGlmIF9sb29wID09IHRydWUgdGhlbiBmYWxzZSBlbHNlIHRydWVcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOWGjeeUn+e1guS6huW+jOOBruWHpueQhlxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9hZnRlciA9IChlKS0+XG5cdFx0X3ZpZGVvID0gQCR2aWRlb1swXVxuXHRcdGlmIF9sb29wXG5cdFx0XHRfdmlkZW8uY3VycmVudFRpbWUgPSAwXG5cdFx0XHRfdmlkZW8ucGxheSgpXG5cdFx0ZWxzZVxuXHRcdFx0X3ZpZGVvLmN1cnJlbnRUaW1lID0gMFxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44OT44OH44Kq44Gu5L2N572u6Kq/5pW0XG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X3N0eWxlRml4ID0gKGUpLT5cblx0XHRfJHZpZGVvICAgICA9IEAkdmlkZW9cblx0XHRfJHZpZGVvV3JhcCA9IEAkdmlkZW9XcmFwXG5cdFx0X2ggICAgICAgICAgPSBfJHZpZGVvLmhlaWdodCgpXG5cdFx0X3dyYXBfaCAgICAgPSBfJHZpZGVvV3JhcC5oZWlnaHQoKVxuXHRcdF8kdmlkZW8uY3NzKCdoZWlnaHQnLCdhdXRvJylcblx0XHRpZiBfd3JhcF9oID4gX2hcblx0XHRcdF8kdmlkZW8uY3NzKHtcblx0XHRcdFx0J21hcmdpbi10b3AnIDogKCAoIF9oICsgMTAwICkgLyAyICkgKiAtMVxuXHRcdFx0XHQndG9wJyAgICAgICAgOiAnNTAlJ1xuXHRcdFx0fSlcblx0XHRlbHNlXG5cdFx0XHRfJHZpZGVvLmNzcyh7XG5cdFx0XHRcdCdoZWlnaHQnICAgICA6IF93cmFwX2hcblx0XHRcdFx0J21hcmdpbi10b3AnIDogMFxuXHRcdFx0XHQndG9wJyAgICAgICAgOiAwXG5cdFx0XHR9KVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44Kz44Oz44K544OI44Op44Kv44K/XG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Y29uc3RydWN0b3IgOiAoJHZpZGVvLHJlc2l6ZUV2ZW50cywkdmlkZW9XcmFwKS0+XG5cdFx0aWYgX3ZpZGVvSW5zdGFuY2Vcblx0XHRcdHJldHVybiBfdmlkZW9JbnN0YW5jZVxuXHRcdGVsc2Vcblx0XHRcdF92aWRlb0luc3RhbmNlID0gQFxuXHRcdEAkdmlkZW8gICAgID0gJHZpZGVvXG5cdFx0QCR2aWRlb1dyYXAgPSAkdmlkZW9XcmFwXG5cdFx0X2V2ZW50c09iai5lbmRlZC5hZnRlciAgICAgPSAoZSk9PiBfYWZ0ZXIuY2FsbChALGUpXG5cdFx0cmVzaXplRXZlbnRzLnZpZGVvU3R5bGVGaXggPSAoZSk9PiBfc3R5bGVGaXguY2FsbChALGUpXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjgqTjg5njg7Pjg4jjg6rjgrnjg4rjg7zjga7lj5blvpdcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRnZXRFdmVudHNPYmogOiAobmFtZSktPlxuXHRcdGlmIG5hbWUgPT0gJ2FsbCdcblx0XHRcdHJldHVybiBfZXZlbnRzT2JqXG5cdFx0ZWxzZSBpZiBuYW1lICYmIF9ldmVudHNPYmpbbmFtZV1cblx0XHRcdHJldHVybiBfZXZlbnRzT2JqW25hbWVdXG5cdFx0ZWxzZVxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDjgqTjg5njg7Pjg4jjga7lj5fjgZHlj5bjgopcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRyZWNlaXZlRXZlbnQgOiAobmFtZSxhcnIpLT5cblx0XHRpZiBuYW1lID09ICd1cGxvYWQnICAgICAgIHRoZW4gX3JlY2VpdmVzT2JqLnVybFNldC5jYWxsKEAsYXJyWzBdKVxuXHRcdGlmIG5hbWUgPT0gJ3BsYXknICAgICAgICAgdGhlbiBfcmVjZWl2ZXNPYmoucGxheS5jYWxsKEApXG5cdFx0aWYgbmFtZSA9PSAncGF1c2UnICAgICAgICB0aGVuIF9yZWNlaXZlc09iai5wYXVzZS5jYWxsKEApXG5cdFx0aWYgbmFtZSA9PSAnbG9vcCcgICAgICAgICB0aGVuIF9yZWNlaXZlc09iai5sb29wLmNhbGwoQClcblx0XHRpZiBuYW1lID09ICdzZWVrQ2hhbmdlZCcgIHRoZW4gX3JlY2VpdmVzT2JqLnNlZWtDaGFuZ2VkLmNhbGwoQCxhcnJbMF0pXG5cdFx0aWYgbmFtZSA9PSAnc3BlZWRDaGFuZ2VkJyB0aGVuIF9yZWNlaXZlc09iai5zcGVlZENoYW5nZWQuY2FsbChALGFyclswXSlcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjICTjgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TjgZlcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRnZXQkb2JqIDogKCktPlxuXHRcdHJldHVybiBAJHZpZGVvXG5cblxuXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyDjgqLjg4Pjg5fjg63jg7zjg4Djg7xcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBGaWxlVXBsb2FkZXJcblx0X3VwbG9hZCA9IChlKS0+XG5cdFx0ZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdXG5cdFx0aWYgIS9edmlkZW8vLnRlc3QoZmlsZS50eXBlKVxuXHRcdFx0YWxlcnQgXCLli5XnlLvlvaLlvI/jgafjga/jgYLjgorjgb7jgZvjgpPjgIJcIlxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0QHZpZGVvLnJlY2VpdmVFdmVudChcblx0XHRcdCd1cGxvYWQnLFxuXHRcdFx0W25ldyBCbG9iKFtmaWxlXSx7dHlwZTpmaWxlLnR5cGV9KV1cblx0XHQpXG5cdFx0cmV0dXJuXG5cblx0Y29uc3RydWN0b3IgOiAodmlkZW8sJGlucHV0KS0+XG5cdFx0QHZpZGVvICA9IHZpZGVvXG5cdFx0QCRpbnB1dCA9ICRpbnB1dFxuXG5cdFx0QCRpbnB1dC5vbignY2hhbmdlJywoZSk9PiBfdXBsb2FkLmNhbGwoQCxlKSlcblxuXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyDjgrPjg7Pjg4jjg63jg7zjg6njg7wgOiDjgrfjg7zjgq9cbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNsYXNzIFNlZWtcblx0X3RpbWUgICAgID0gMCAjIOePvuWcqOOBruWGjeeUn+S9jee9rlxuXHRfZHVyYXRpb24gPSAwICMg5YuV55S744Gu6ZW344GVXG5cdF9oYXNWaWRlbyA9IGZhbHNlXG5cdF9pc0RyYWcgICA9IGZhbHNlXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyDntYzpgY7mmYLplpPjgarjganjga7lj5blvpdcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRfc2V0U2Vla1RpbWVzID0gKCktPlxuXHRcdF92aWRlbyAgICA9IEB2aWRlby5nZXQkb2JqKClbMF1cblx0XHRfdGltZSAgICAgPSBfdmlkZW8uY3VycmVudFRpbWVcblx0XHRfZHVyYXRpb24gPSBfdmlkZW8uZHVyYXRpb25cblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOihqOekuuaZgumWk+OBruWkieabtFxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9jaGFuZ2VTZWVrQ291bnQgPSAoKS0+XG5cdFx0X3NldFNlZWtUaW1lcy5jYWxsKEApXG5cdFx0QCRub3dTZWVrLnRleHQoX3RpbWUrJyAvICcrX2R1cmF0aW9uKVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44K344O844Kv44OQ44O85aSJ5pu0XG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X2NoYW5nZVNlZWtiYXIgPSAoZSktPlxuXHRcdF9zZXRTZWVrVGltZXMuY2FsbChAKVxuXHRcdGlmICFfaXNEcmFnXG5cdFx0XHRAJHNlZWsudmFsKCBNYXRoLnJvdW5kKCAoIF90aW1lIC8gX2R1cmF0aW9uICkgKiAxMDAwMCApIC8gMTAwIClcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOOCt+ODvOOCr+WIneacn+WMllxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9zZWVrSW5pdCA9IChlKS0+XG5cdFx0X2hhc1ZpZGVvID0gdHJ1ZVxuXHRcdF92aWRlbyAgICA9ICQoZS50YXJnZXQpWzBdXG5cdFx0X3RpbWUgICAgID0gX3ZpZGVvLmN1cnJlbnRUaW1lXG5cdFx0X2R1cmF0aW9uID0gX3ZpZGVvLmR1cmF0aW9uXG5cdFx0QCRzZWVrLnZhbChfdGltZSlcblx0XHRfY2hhbmdlU2Vla0NvdW50LmNhbGwoQClcblx0XHRyZXR1cm5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIOOCt+ODvOOCr+ODkOODvOaTjeS9nOW+jFxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdF9zZWVrVXAgPSAoZSktPlxuXHRcdF9zZXRTZWVrVGltZXMuY2FsbChAKVxuXHRcdF92YWwgPSAoIEAkc2Vlay52YWwoKSAvIDEwMCApICogX2R1cmF0aW9uXG5cdFx0QHZpZGVvLnJlY2VpdmVFdmVudCggJ3NlZWtDaGFuZ2VkJyxbX3ZhbF0gKVxuXHRcdF9pc0RyYWcgPSBmYWxzZVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMg44K344O844Kv44OQ44O85pON5L2c5LitXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0X3NlZWtJbnB1dCA9IChlKS0+XG5cdFx0aWYgIV9oYXNWaWRlb1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHQkKGUudGFyZ2V0KS52YWwoMClcblx0XHRlbHNlXG5cdFx0XHRfaXNEcmFnID0gdHJ1ZVxuXHRcdHJldHVyblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCNcblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRjb25zdHJ1Y3RvciA6ICh2aWRlbywkc2Vlaywkbm93U2VlayktPlxuXHRcdEAkc2VlayAgICAgICA9ICRzZWVrXG5cdFx0QCRub3dTZWVrICAgID0gJG5vd1NlZWtcblx0XHRAdmlkZW8gICAgICAgPSB2aWRlb1xuXHRcdEB2aWRlb0V2ZW50cyA9IEB2aWRlby5nZXRFdmVudHNPYmooJ2FsbCcpXG5cdFx0QCRzZWVrLm9uKCdpbnB1dCcsKGUpPT4gX3NlZWtJbnB1dC5jYWxsKEAsZSkgKVxuXHRcdEAkc2Vlay5vbignY2hhbmdlJywoZSk9PiBfc2Vla1VwLmNhbGwoQCxlKSApXG5cdFx0QCRzZWVrLm9uKCcnLChlKT0+IF9zZWVrVXAuY2FsbChALGUpIClcblx0XHRAdmlkZW9FdmVudHMubG9hZGVkWydzZWVrSW5pdCddICAgICAgICAgID0gKGUpPT4gX3NlZWtJbml0LmNhbGwoQCxlKVxuXHRcdEB2aWRlb0V2ZW50cy50aW1ldXBkYXRlWydjaGFuZ2VTZWVrYmFyJ10gPSAoZSk9PlxuXHRcdFx0X2NoYW5nZVNlZWtiYXIuY2FsbChALGUpXG5cdFx0XHRfY2hhbmdlU2Vla0NvdW50LmNhbGwoQCxlKVxuXHRcdHJldHVyblxuXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIyDjgrPjg7Pjg4jjg63jg7zjg6njg7wgOiDjg5zjgr/jg7NcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBDb250cm9sbGVyQnRuc1xuXG5cdF9jaGFuZ2VCdG4gPSAodHlwZSktPlxuXHRcdHN3aXRjaCB0eXBlXG5cdFx0XHR3aGVuICdwbGF5J1xuXHRcdFx0XHRAYnRucy4kcGxheS5hZGRDbGFzcygnYWN0aXZlJylcblx0XHRcdFx0QGJ0bnMuJHBhdXNlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuXHRcdFx0d2hlbiAncGF1c2UnXG5cdFx0XHRcdEBidG5zLiRwYXVzZS5hZGRDbGFzcygnYWN0aXZlJylcblx0XHRcdFx0QGJ0bnMuJHBsYXkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG5cdFx0cmV0dXJuXG5cblx0X3BsYXkgPSAoZSktPlxuXHRcdGUucHJldmVudERlZmF1bHQoKVxuXHRcdEB2aWRlby5yZWNlaXZlRXZlbnQoJ3BsYXknKVxuXHRcdHJldHVyblxuXG5cdF9wYXVzZSA9IChlKS0+XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0QHZpZGVvLnJlY2VpdmVFdmVudCgncGF1c2UnKVxuXHRcdHJldHVyblxuXG5cdF9teUxvb3AgPSAoZSktPlxuXHRcdGUucHJldmVudERlZmF1bHQoKVxuXHRcdGlmIEBidG5zLiRsb29wLmhhc0NsYXNzKCdhY3RpdmUnKVxuXHRcdFx0QGJ0bnMuJGxvb3AucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG5cdFx0ZWxzZVxuXHRcdFx0QGJ0bnMuJGxvb3AuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cdFx0QHZpZGVvLnJlY2VpdmVFdmVudCgnbG9vcCcpXG5cdFx0cmV0dXJuXG5cblx0X2J0bnNSZXNldCA9IChlKS0+XG5cdFx0QGJ0bnMuJHBsYXkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG5cdFx0QGJ0bnMuJHBhdXNlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuXHRcdHJldHVyblxuXG5cdGNvbnN0cnVjdG9yIDogKHZpZGVvLGJ0bnMpLT5cblx0XHRAdmlkZW8gICAgICAgPSB2aWRlb1xuXHRcdEBidG5zICAgICAgICA9IGJ0bnNcblx0XHRAdmlkZW9FdmVudHMgPSBAdmlkZW8uZ2V0RXZlbnRzT2JqKCdhbGwnKVxuXHRcdEBidG5zLiRwbGF5Lm9uKCdjbGljaycsKGUpPT4gX3BsYXkuY2FsbChALGUpKVxuXHRcdEBidG5zLiRwYXVzZS5vbignY2xpY2snLChlKT0+IF9wYXVzZS5jYWxsKEAsZSkpXG5cdFx0QGJ0bnMuJGxvb3Aub24oJ2NsaWNrJywoZSk9PiBfbXlMb29wLmNhbGwoQCxlKSlcblx0XHRAdmlkZW9FdmVudHMucGxheVsnY2hhbmdlQnRuJ10gICA9IChlKT0+IF9jaGFuZ2VCdG4uY2FsbChALCdwbGF5Jylcblx0XHRAdmlkZW9FdmVudHMucGF1c2VbJ2NoYW5nZUJ0biddICA9IChlKT0+IF9jaGFuZ2VCdG4uY2FsbChALCdwYXVzZScpXG5cdFx0QHZpZGVvRXZlbnRzLmxvYWRlZFsnYnRuc1Jlc2V0J10gPSAoZSk9PiBfYnRuc1Jlc2V0LmNhbGwoQClcblxuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiMg44Kz44Oz44OI44Ot44O844Op44O8IDog44K544OU44O844OJXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgU3BlZWRcblxuXHRfc2V0U3BlZWRNZXRlciA9ICgpLT5cblx0XHRAJG1ldGVyLnRleHQoQHZhbClcblx0XHRyZXR1cm5cblxuXHRfc3BlZWRDaGFuZ2UgPSAoZSktPlxuXHRcdEB2YWwgPSBAJGlucHV0LnZhbCgpXG5cdFx0X3NldFNwZWVkTWV0ZXIuY2FsbChAKVxuXHRcdEB2aWRlby5yZWNlaXZlRXZlbnQoJ3NwZWVkQ2hhbmdlZCcsW0B2YWxdKVxuXHRcdHJldHVyblxuXG5cdF9zcGVlZFJlc2V0ID0gKGUpLT5cblx0XHRAJGlucHV0LnZhbChAZGVmYXVsdFZhbClcblx0XHRAdmFsID0gQCRpbnB1dC52YWwoKVxuXHRcdF9zZXRTcGVlZE1ldGVyLmNhbGwoQClcblx0XHRfc3BlZWRDaGFuZ2UuY2FsbChAKVxuXHRcdHJldHVyblxuXG5cdGNvbnN0cnVjdG9yIDogKHZpZGVvLGlucHV0LG1ldGVyKS0+XG5cdFx0QHZpZGVvICAgICAgID0gdmlkZW9cblx0XHRAJGlucHV0ICAgICAgPSAkKGlucHV0KVxuXHRcdEAkbWV0ZXIgICAgICA9ICQobWV0ZXIpXG5cdFx0QHZhbCAgICAgICAgID0gQCRpbnB1dC52YWwoKVxuXHRcdEBkZWZhdWx0VmFsICA9IEB2YWxcblx0XHRAdmlkZW9FdmVudHMgPSBAdmlkZW8uZ2V0RXZlbnRzT2JqKCdhbGwnKVxuXHRcdEAkaW5wdXQub24oJ2NoYW5nZScsKGUpPT4gX3NwZWVkQ2hhbmdlLmNhbGwoQCxlKSApXG5cdFx0QHZpZGVvRXZlbnRzLmxvYWRlZFsnc3BlZWRSZXNldCddID0gKGUpPT4gX3NwZWVkUmVzZXQuY2FsbChALGUpXG5cblxuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiNcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRvLT5cblx0dmlkZW8gICAgICAgICAgPSBuZXcgVmlkZW8oICQoJyN2aWRlbycpLHJlc2l6ZUV2ZW50cywkKCcjdmlkZW9fd3JhcCcpIClcblx0ZmlsZVVwbG9hZGVyICAgPSBuZXcgRmlsZVVwbG9hZGVyKCB2aWRlbywkKCcjZmlsZScpIClcblx0c2VlayAgICAgICAgICAgPSBuZXcgU2VlayggdmlkZW8sJCgnI3NlZWsnKSwkKCcjbm93X3NlZWsnKSApXG5cdHNwZWVkICAgICAgICAgID0gbmV3IFNwZWVkKCB2aWRlbywnI3NwZWVkJywnI25vd19zcGVlZCcgKVxuXHRjb250cm9sbGVyQnRucyA9IG5ldyBDb250cm9sbGVyQnRucyhcblx0XHR2aWRlb1xuXHRcdHtcblx0XHRcdCckcGxheScgIDogJCgnI2NvbnRyb2xsZXJzX2J0biAucGxheSBhJylcblx0XHRcdCckcGF1c2UnIDogJCgnI2NvbnRyb2xsZXJzX2J0biAucGF1c2UgYScpXG5cdFx0XHQnJGxvb3AnICA6ICQoJyNjb250cm9sbGVyc19idG4gLmxvb3AgYScpXG5cdFx0fVxuXHQpXG5cdHNldE9ic2VydmVyKCQoJyN2aWRlbycpLHZpZGVvKVxuXHQkd2luLnRyaWdnZXIoJ3Jlc2l6ZScpXG5cdHJldHVybiJdfQ==